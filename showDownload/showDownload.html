<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chat to Chat</title>
    <link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.2.0/css/font-awesome.min.css"/>
    <link type="text/css" rel="stylesheet" href="showDownload.css" />
    <script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js "></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js "></script>
    <script src="dist/web3.min.js"></script>
    <script type="text/javascript" src="showDownload.js"></script>
    <script>



        function startApp(){
            var address = "0xe3be5cfbc3d7aac197a1bd5d6c1a7e584742f6ad";
            var abi = [
                {
                    "constant": true,
                    "inputs": [],
                    "name": "names",
                    "outputs": [
                        {
                            "name": "",
                            "type": "string"
                        }
                    ],
                    "payable": false,
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "constant": true,
                    "inputs": [],
                    "name": "owner",
                    "outputs": [
                        {
                            "name": "",
                            "type": "address"
                        }
                    ],
                    "payable": false,
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "constant": true,
                    "inputs": [
                        {
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "name": "studentAccounts",
                    "outputs": [
                        {
                            "name": "studentId",
                            "type": "uint256"
                        },
                        {
                            "name": "studentPassword",
                            "type": "string"
                        }
                    ],
                    "payable": false,
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "constant": true,
                    "inputs": [
                        {
                            "name": "",
                            "type": "uint256"
                        }
                    ],
                    "name": "teacherAccounts",
                    "outputs": [
                        {
                            "name": "teacherId",
                            "type": "uint256"
                        },
                        {
                            "name": "teacherPassword",
                            "type": "string"
                        }
                    ],
                    "payable": false,
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "constant": false,
                    "inputs": [
                        {
                            "name": "newOwner",
                            "type": "address"
                        }
                    ],
                    "name": "transferOwnership",
                    "outputs": [],
                    "payable": false,
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "anonymous": false,
                    "inputs": [
                        {
                            "indexed": true,
                            "name": "previousOwner",
                            "type": "address"
                        },
                        {
                            "indexed": true,
                            "name": "newOwner",
                            "type": "address"
                        }
                    ],
                    "name": "OwnershipTransferred",
                    "type": "event"
                },
                {
                    "constant": false,
                    "inputs": [
                        {
                            "name": "id",
                            "type": "uint256"
                        },
                        {
                            "name": "data",
                            "type": "string"
                        }
                    ],
                    "name": "uploadStudentData",
                    "outputs": [],
                    "payable": false,
                    "stateMutability": "nonpayable",
                    "type": "function"
                },
                {
                    "constant": false,
                    "inputs": [
                        {
                            "name": "id",
                            "type": "uint256"
                        },
                        {
                            "name": "dataId",
                            "type": "uint256"
                        }
                    ],
                    "name": "getData",
                    "outputs": [],
                    "payable": true,
                    "stateMutability": "payable",
                    "type": "function"
                },
                {
                    "constant": true,
                    "inputs": [],
                    "name": "showDownloadInfo",
                    "outputs": [
                        {
                            "name": "",
                            "type": "string"
                        }
                    ],
                    "payable": false,
                    "stateMutability": "view",
                    "type": "function"
                },
                {
                    "constant": false,
                    "inputs": [],
                    "name": "withdraw",
                    "outputs": [],
                    "payable": false,
                    "stateMutability": "nonpayable",
                    "type": "function"
                }
            ];
            var myContractInstance = web3.eth.contract(abi).at(address);
            myContractInstance.showDownloadInfo.call(function (result, error) {
                if(!error) {
                    alert(result);
                }
            });
        }


        window.addEventListener('load', function() {
            if (typeof web3 !== 'undefined') {
                web3 = new Web3(web3.currentProvider);
            }
            else {
                // Set the provider you want from Web3.providers
                web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
            }
            startApp()
        })
    </script>
    <script>
        window.onload = function () {
            alert(web3.version.api);
            page1ToPage2(web3);
            getInputAlice();
        }
    </script>
</head>

<body id="body">
<div class="container-fluid">
    <div id="page1" class="row text-center align-middle">
        <br><br>
        <div id="page1A" class="col-md-12">
            <div class="panel panel-default page1">
                <div class="panel-body">
                    <div id="img1">
                        <img src="../Logo.png" height=30% width=30%/>
                    </div>
                    <br><br>
                    <div id="text1" class="text-center">
                            <textarea class="page1Text" readonly="true" disabled="true" style="resize:none">
                            you can check address that someone downloads documents.
                            </textarea>
                    </div>
                    <br><br>
                    <div id="input1" class="text-center">
                        <input id="searchAddress" class="page1Input" type="text" placeholder="Your address..."  style="resize:none" required>
                    </div>
                    <br><br>
                    <br><br>
                    <div id="button1">
                        <button id="page1ButtonA" class="btn btn-primary btn-lg">CONNECT</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="page2" class="row" hidden="true">
        <br><br>
        <div id="page2A" class="col-md-12">
            <div class="panel panel-default page2">
                <div class="panel-body">
                    <div class="row text-center">
                        <textarea id="firstAlice" class="first text-center" readonly="true" disabled="true" style="resize:none">
                        </textarea>
                    </div>
                    <div class="row text-center">
                        <textarea id="secondAlice" class="second" readonly="true" disabled="true" style="resize:none"></textarea>
                    </div>
                    <div>
                        <textarea id="AliceText" class="text" readonly="true" style="resize:none" disabled="true" class="contextSide"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>

<div id="foot" class="text-center">
    <footer>
        <p>Â©copy right by<a href="#"> GoTera</a>
    </footer>
</div>
</html>